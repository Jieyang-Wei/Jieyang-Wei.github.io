<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Network | 魏洁杨</title><link rel="shortcut icon" href="/images/logo.svg"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/css/font-awesome.min.css"><script id="hexo-configurations">let KEEP=window.KEEP||{};KEEP.hexo_config={hostname:"jieyang-wei.github.io",root:"/",path:"search.json"},KEEP.theme_config={toc:{enable:!0,number:!0,expand_all:!0},style:{primary_color:"#0066CC",avatar:"/images/avatar.jpg",favicon:"/images/logo.svg",img_position:"left",left_side_width:"260px",content_max_width:"900px",hover:{shadow:!0,scale:!0},first_screen:{enable:!0,background_img:"/images/bg.svg",description:"Welcome to Jieyang Wei's Blog"}},local_search:{enable:!0,trigger:"auto",unescape:!1,preload:!0},version:"3.0.4"},KEEP.language={search:"Search...",prev:"Prev",next:"Next",prev_posts:"Prev posts",next_posts:"Next posts",page:"Page %d",recent_posts:"Recent Posts",share:"Share",powered_by:"Powered by %s",theme:"Theme",rss_feed:"RSS Feed",category:"Category",categories:"Categories",tag:"Tag",tags:"Tags",tagcloud:"Tag Cloud",comment:"Comment",home:"Home",archive:"Archive",archives:"Archives",about:"About",site_uv:"Visitor Count",site_pv:"Totalview",links:"Links",link:"Link",top:"TOP",read_more:"Read more",wordcount:"Words",min2read:"Mins",changelog:"Changelog",copyright:{author:"Post author",title:"Post title",link:"Post link",create_time:"Create time",license_title:"Copyright Notice",license_content:"All articles in this blog are licensed under %s unless stating additionally."},ago:{second:"%s seconds ago",minute:"%s minutes ago",hour:"%s hours ago",day:"%s days age",week:"%s weeks age",month:"%s months age",year:"%s years age"}}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="WeiJY's blog" type="application/atom+xml"></head><body><div class="page-container"><header class="page-header"><div class="header-progress"></div></header><main class="page-main"><div class="page-main-content"><div class="page-main-content-top"><header class="header-wrapper"><div class="header-content"><a class="logo-title" href="/">魏洁杨</a><ul class="menu-list"><li class="menu-item"><a href="/">HOME</a></li><li class="menu-item"><a href="/categories">CATEGORIES</a></li><li class="menu-item"><a href="/categories/notebook">NOTEBOOK</a></li><li class="menu-item"><a href="/about">ABOUT</a></li><li class="menu-item"><a href="/tags">TAGS</a></li></ul><div class="menu-bar"><div class="menu-bar-middle"></div></div></div><div class="header-drawer"><ul class="drawer-menu-list"><li class="drawer-menu-item flex-center"><a href="/">HOME</a></li><li class="drawer-menu-item flex-center"><a href="/categories">CATEGORIES</a></li><li class="drawer-menu-item flex-center"><a href="/categories/notebook">NOTEBOOK</a></li><li class="drawer-menu-item flex-center"><a href="/about">ABOUT</a></li><li class="drawer-menu-item flex-center"><a href="/tags">TAGS</a></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle"><main class="main-content normal-code-theme"><div class="fade-in-down-animation"><div class="article-content-container"><div class="article-title"><span class="title-hover-animation">Network</span></div><div class="article-header"><div class="avatar"><img src="/images/avatar.jpg"></div><div class="info"><div class="author"><span>Wei Jieyang</span> <span class="level">Lv4</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fas fa-calendar"></i> 2021-03-22 18:15:31 </span><span class="article-categories article-meta-item"><i class="fas fa-folder"></i><ul><li><a href="/categories/Notebook/">Notebook</a></li><li>&gt; <a href="/categories/Notebook/Blockchain/">Blockchain</a></li><li>&gt; <a href="/categories/Notebook/Blockchain/Fabric/">Fabric</a></li></ul></span><span class="article-tags article-meta-item"><i class="fas fa-tags"></i><ul><li><a href="/tags/fabric/">fabric</a></li><li>| <a href="/tags/blockchain/">blockchain</a></li></ul></span><span class="article-wordcount article-meta-item"><i class="fas fa-file-word"></i> <span>5.2k Words</span> </span><span class="article-min2read article-meta-item"><i class="fas fa-clock"></i> <span>19 Mins</span> </span><span class="article-pv article-meta-item"><i class="fas fa-eye"></i> <span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本部分主要讲解生产网络的部署</p><p>因为所有的节点等都是在docker容器中跑的，所以</p><h1 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h1><h2 id="相关部分"><a href="#相关部分" class="headerlink" title="相关部分"></a>相关部分</h2><h3 id="证书颁发机构"><a href="#证书颁发机构" class="headerlink" title="证书颁发机构"></a>证书颁发机构</h3><p>作为整体决策的一部分</p><ul><li>必须决定<strong>peer</strong>（总共多少，每个通道上有多少）以及<strong>ordering service</strong>（有多少个节点，谁将拥有这些节点）</li><li>必须决定组织的CA将如何被部署。</li></ul><p>生产网络应使用传输层安全性（TLS），这将需要设置TLS CA并使用它来生成TLS证书。</p><ul><li>在enrollment CA之前，需要先部署TLS CA。</li><li>详细在“设置CA”部分</li></ul><h3 id="Organization"><a href="#Organization" class="headerlink" title="Organization"></a>Organization</h3><p>一些组织可能发现有必要建立组织单位，以在某些身份和单个CA创建的MSP之间建立隔离（例如，制造商可能希望其一个组织单位用于其运输部门，而另一个组织单位用于其质量控制部门）。请注意，这与“节点OU”的概念是分开的，在“节点OU”中，身份可以具有编码到其中的角色（例如，“ admin”或“ peer”）。</p><h3 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h3><p>网络中的某些通道可能要求以<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/couchdb_as_state_database.html">状态数据库<i class="fas fa-external-link-alt"></i></a>可以理解的方式对所有数据进行建模，而其他网络可能会优先考虑速度，从而决定所有对等方都将使用LevelDB。请注意，通道上不应有同时使用CouchDB和LevelDB的对等体，因为CouchDB对键和值施加了一些数据限制。在LevelDB中有效的键和值在CouchDB中可能无效。</p><h3 id="System-Channel"><a href="#System-Channel" class="headerlink" title="System Channel"></a>System Channel</h3><p>订购节点可以使用称为“系统通道”（可从中创建应用程序通道）的管理通道的配置块来加载，也可以简单地根据需要启动并加入到应用程序通道中。推荐的方法是在没有配置块的情况下进行引导，这是本部署指南假定采用的方法。有关创建系统通道创始块并使用它引导引导节点的更多信息，请参见Fabric v2.2文档中的“<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html#creating-an-ordering-node">部署生产网络<i class="fas fa-external-link-alt"></i></a>”。</p><h3 id="Channel-and-Private-Data"><a href="#Channel-and-Private-Data" class="headerlink" title="Channel and Private Data"></a>Channel and Private Data</h3><p>某些网络可能会认为，<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/channels.html">通道<i class="fas fa-external-link-alt"></i></a>是确保某些交易的私密性和隔离性的最佳方法。其他人可能会决定，更少的通道（必要时补充<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/private-data/private-data.html">私人数据集<i class="fas fa-external-link-alt"></i></a>）可以更好地满足他们的隐私需求。</p><h3 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h3><p>不同的用户还可能对他们的容器编排做出不同的决定，为他们的对等进程，日志记录，CouchDB，gRPC通信和链代码创建单独的容器，而其他用户可能决定合并其中的一些过程。</p><h3 id="Chaincode"><a href="#Chaincode" class="headerlink" title="Chaincode"></a>Chaincode</h3><p>用户可以选择使用build-in build和run support，使用<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/cc_launcher.html">外部构建器和启动器<i class="fas fa-external-link-alt"></i></a>进行自定义的构建和运行，或者使用<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/cc_service.html">Chaincode作为外部服务<i class="fas fa-external-link-alt"></i></a>来部署其链代码。</p><h3 id="firewall"><a href="#firewall" class="headerlink" title="firewall"></a>firewall</h3><p>在生产部署中，属于一个组织的组件可能需要访问其他组织的组件，因此必须使用防火墙和高级网络配置。例如，使用Fabric SDK的应用程序需要访问所有组织的所有endorsing peer以及所有通道上的ordering service。同样，对等方需要从他们接收新块的通道上访问ordering service。</p><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="设置资源集群"><a href="#设置资源集群" class="headerlink" title="设置资源集群"></a>设置资源集群</h3><p>推荐：Kubernetes</p><p>无论您选择在何处部署组件，都需要确保有足够的资源来使组件有效运行。您需要的大小将在很大程度上取决于您的用例。如果您打算将单个对等方加入到多个大容量通道，则比仅计划加入一个通道时，它需要更多的CPU和内存。粗略估计，在计划分配给单个订购节点时，计划将大约三倍的资源专用于对等方（如下所示，建议在订购服务中至少部署三个，最好部署五个节点） 。同样，与对等端一样，CA大约需要十分之一的资源。您还需要将存储添加到您的群集中（某些云提供商可能会提供存储），因为如果没有先与您的云提供商一起设置存储，就无法配置持久卷和持久卷声明。持久性存储的使用可确保MSP，分类帐和已安装链码之类的数据不存储在容器文件系统中，从而防止在销毁容器时将其销毁。</p><h3 id="管理基础架构"><a href="#管理基础架构" class="headerlink" title="管理基础架构"></a>管理基础架构</h3><p>用来管理后端的确切方法和工具将取决于所选择的后端。但请注意：</p><ul><li>使用机密对象将重要的配置文件安全地存储在群集中。有关Kubernetes机密的信息，请查看<a class="link" target="_blank" rel="noopener" href="https://kubernetes.io/docs/concepts/configuration/secret/">Kubernetes机密<i class="fas fa-external-link-alt"></i></a>。您还可以选择使用硬件安全模块（HSM）或加密的永久卷（PV）。同样，在部署Fabric组件之后，您可能希望在自己的后端连接到容器，例如在Docker Hub之类的服务中使用私有仓库。在这种情况下，您将需要以Kubernetes机密的形式对登录信息进行编码，并在部署组件时将其包含在YAML文件中。</li><li>群集注意事项和节点大小。在上面的步骤中，我们讨论了有关如何考虑节点大小的总体概述。您的用例以及稳健的开发周期是您真正了解对等方，订购节点和CA的大小的唯一方法。</li><li>您如何选择挂载卷。最佳做法是将与您的节点相关的卷挂载到部署节点的外部。这将使您以后可以引用这些卷（例如，重新启动已崩溃的节点或容器），而不必重新部署或重新生成加密材料。</li><li>您将如何监视资源。建立用于监视各个节点使用的资源以及通常部署到群集的资源的策略和方法至关重要。当您将同伴加入更多渠道时，可能需要增加其CPU和内存分配。同样，您将需要确保有足够的存储空间用于状态数据库和区块链。</li></ul><h3 id="设置CA"><a href="#设置CA" class="headerlink" title="设置CA"></a>设置CA</h3><h3 id="CA和MSP"><a href="#CA和MSP" class="headerlink" title="CA和MSP"></a>CA和MSP</h3><p>创建CA后，可以使用它们为与组织（由MSP表示）相关的标识和组件创建证书。对于每个组织，至少需要：</p><ol><li><strong>register and enroll an admin identity and create an MSP</strong><ul><li>创建与组织相关联的CA，rigister a user and then enroll an identity （生成用于网络所有实体的证书对）<ol><li>由CA管理员分配用于标识身份的用户名和密码。属性和从属关系也可以被提供给身份（例如，一个<code>role</code>的<code>admin</code>，这是必要的组织管理员）</li><li>enroll identity之后可以用用户名和密码来register</li></ol></li><li>CA将为此身份生成两个证书，用于对身份采取的操作进行签名<ul><li>网络其他成员已知的<strong>公共证书</strong>（也称为“ signcert”或“公共证书”）</li><li><strong>私钥</strong>（存储在<code>keystore</code>文件夹）。</li></ul></li><li>CA还将生成一组文件夹，称为“ MSP”，其中包含颁发证书的CA的公共证书以及该CA的信任根（可能是相同的CA，也可能不是同一CA）。<ul><li>该MSP可以认为是定义与管理员身份相关联的组织。</li><li>如果组织的管理员也将是节点的管理员（这是典型的），则<strong>必须在创建节点的本地MSP之前创建组织的管理员身份，因为在之后情况下必须使用节点管理员的证书创建本地MSP</strong>。</li></ul></li></ul></li></ol><ol start="2"><li><strong>Register and enroll node identities</strong><ul><li>必须同时使用 enrollment CA和TLS CA（后者生成用于保护通信的证书）register和enroll 节点的身份。而不是给节点一个<code>admin</code>或者<code>user</code>的角色</li><li>在向 enrollmentCA注册该节点时，给它一个<code>peer</code>或<code>orderer</code>的角色。与管理员一样，也可以分配此身份的属性和从属关系。</li><li>节点的MSP结构称为“本地MSP”，因为分配给身份的权限仅在本地（节点）级别相关。此MSP是在创建节点标识时创建的，并在引导节点时使用。</li></ul></li></ol><h3 id="部署peer和orderer"><a href="#部署peer和orderer" class="headerlink" title="部署peer和orderer"></a>部署peer和orderer</h3><p>部署节点前先定义其配置文件</p><ul><li>peer：<code>config/core.yaml</code></li><li>ordering node：<code>config/orderer.yaml</code></li></ul><p>三个主要选项可用于调整配置。</p><ol><li>编辑与二进制文件捆绑在一起的YAML文件。<ul><li>优点：每当关闭并重新启动节点时，都将保留更改</li><li>缺点：在升级到新的二进制版本时，必须将自定义的选项移植到新的YAML（升级到新版本时，应使用最新的YAML）。</li></ul></li><li>部署时使用环境变量替代。</li><li>在CLI命令上指定标志。</li></ol><blockquote><p>可以使用所有大写字母，相关短语之间的下划线和前缀，从相关YAML文件中的参数推断环境变量。例如：</p><ul><li>peer配置变量称为<code>peer.localMSPid</code>（它是<code>localMSPid</code>内侧可变<code>peer</code>结构部分）在<code>core.yaml</code>将被呈现为所谓的环境变量<code>CORE_PEER_LOCALMSPID</code></li><li>而订购服务环境变量<code>General.LocalMSPID</code>在<code>orderer.yaml</code>配置文件的<code>General</code>所述的部分将被呈现为所谓的环境变量<code>ORDERER_GENERAL_LOCALMSPID</code>。</li></ul></blockquote><h4 id="peer"><a href="#peer" class="headerlink" title="peer"></a>peer</h4><h5 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h5><p>peer由属于渠道成员的组织所有（因此，有时将这些组织称为“对等组织”）。它们连接到订购服务和其他对等方，安装了智能合约，并且是分类帐的存储地。</p><p>在创建对等节点之前，必须了解这些角色，因为它们会影响您的自定义和部署决策。要查看您将需要做出的各种决策，请查看<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deploypeer/peerplan.html">规划生产对等体<i class="fas fa-external-link-alt"></i></a>。</p><p>对等方在<code>config/core.yaml</code>文件中的配置值必须自定义或使用环境变量覆盖。此配置文件与对等映像捆绑在一起，并且也包含在可下载的二进制文件中。有关如何下载产品的<code>core.yaml</code>和对等映像的信息，请查看<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deploypeer/peerdeploy.html">Deploy the peer<i class="fas fa-external-link-alt"></i></a>。</p><p>尽管默认的<code>core.yaml</code>中有许多参数，我们只需要自定义其中的一小部分即可。通常，如果不需要更改调整值，请保留默认值。</p><ul><li><strong>Identifiers</strong>：这些<strong>标识符</strong>不仅包括指向相关本地MSP和传输层安全性（TLS）证书的路径，而且还包括对等方的名称（称为“peer ID”）和拥有对等方的组织的MSP ID。</li><li><strong>Addresses and paths</strong>：因为对等点本身并不是实体，而是与其他对等点和组件交互，所以必须在配置中指定一系列地址。这些地址包其他组件可以用来找到对等点本身的地址，以及可以找到链码的地址（例如，如果您使用外部链码）。同样，您将需要指定分类帐的位置（以及状态数据库类型）和外部构建器的路径（同样，如果您打算使用外部链码）。其中包括“<strong>operations”和“metrics”</strong>，它们可以设置用于通过配置端点来监视对等方的运行状况和性能的方法。</li><li><strong>Gossip</strong>：Fabric网络中的组件使用“Gossip”协议相互通信。通过此协议，发现服务可以发现它们，并将区块和私有数据相互传播。请注意，Gossip通信使用TLS进行保护。</li></ul><blockquote><p>有关<code>core.yaml</code>其特定参数的更多信息，请查看<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deploypeer/peerchecklist.html">production peer的清单<i class="fas fa-external-link-alt"></i></a>。</p><p>当对对等方的配置方式，卷的安装方式以及后端配置感到满意时，可以运行命令来启动对等方（此命令将取决于您的后端配置）。</p></blockquote><h5 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h5><ul><li><a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deploypeer/peerplan.html">规划production peer<i class="fas fa-external-link-alt"></i></a></li><li><a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deploypeer/peerchecklist.html">production peer的清单<i class="fas fa-external-link-alt"></i></a></li><li><a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deploypeer/peerdeploy.html">部署peer<i class="fas fa-external-link-alt"></i></a></li></ul><h4 id="order"><a href="#order" class="headerlink" title="order"></a>order</h4><h5 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h5><p>注意：虽然可以在订购服务中添加其他节点，但是这些教程仅介绍创建订购服务的过程。</p><p><strong>ordering service</strong>负责将已认可的交易按字面意义“订购”到块中，然后对等方验证并提交到其分类帐。</p><p>对等方和订购服务之间的<strong>主要区别</strong>在于</p><ul><li>在生产网络中，多个订购节点共同协作以形成通道的“订购服务”（这些节点也称为“消费者集”）。这将创建一系列需要在节点级别和集群级别上做出的重要决策。</li><li>其中一些群集决策不是在单个排序节点配置文件<code>orderer.yaml</code>中做出的，而是在<code>configtx.yaml</code>用于生成应用程序通道的创世纪块的文件中做出的。</li><li>要查看需要做出的各种决定，请查看<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deployorderer/ordererplan.html">规划订购服务<i class="fas fa-external-link-alt"></i></a>。</li></ul><p><code>config/orderer.yaml</code>配置文件必须对定制节点文件中的配置值进行自定义或使用环境变量覆盖它们。</p><p>此配置文件与订购者映像捆绑在一起，并且还包含在可下载的二进制文件中。有关如何下载产品<code>orderer.yaml</code>和<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deployorderer/ordererdeploy.html">订购<i class="fas fa-external-link-alt"></i></a>者映像的信息，请查看“<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deployorderer/ordererdeploy.html">部署订购服务”<i class="fas fa-external-link-alt"></i></a>。</p><p>尽管默认的<code>orderer.yaml</code>中有许多参数，我们只需要自定义其中的一小部分即可。通常，如果不需要更改调整值，请保留默认值：</p><ul><li><strong>Identifiers</strong>：这些<strong>标识符</strong>不仅包括指向相关本地MSP和传输层安全性（TLS）证书的路径，还包括拥有订购节点的组织的MSP ID。</li><li><strong>Addresses and paths</strong>：由于订购节点与其他组件交互，因此必须在配置中指定一系列地址。这些地址包其他组件以及<strong>operations和Metrics</strong>可以在其中找到订购节点本身的地址，这些地址让我们可以设置方法来通过配置端点来监视订购节点的运行状况和性能。</li></ul><p>有关<code>orderer.yaml</code>其特定参数的更多信息，请查看<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deployorderer/ordererchecklist.html">生产订购节点的清单<i class="fas fa-external-link-alt"></i></a>。</p><blockquote><p>注意：本教程假定引导orderer时将不使用系统通道生成块。取而代之的是，这些节点（或其中的一个子集）将使用<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/create_channel/create_channel_participation.html">创建通道<i class="fas fa-external-link-alt"></i></a>的过程加入到<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/create_channel/create_channel_participation.html">通道<i class="fas fa-external-link-alt"></i></a>中。有关如何创建将通过系统通道创始块自举<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html">的订购程序的信息<i class="fas fa-external-link-alt"></i></a>，请<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html">参阅<i class="fas fa-external-link-alt"></i></a>Fabric v2.2文档中的“<a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/deployment_guide_overview.html">部署订购服务<i class="fas fa-external-link-alt"></i></a>”。</p></blockquote><h5 id="部署-1"><a href="#部署-1" class="headerlink" title="部署"></a>部署</h5><ul><li><a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deployorderer/ordererplan.html">规划订购服务<i class="fas fa-external-link-alt"></i></a></li><li><a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deployorderer/ordererchecklist.html">生产订购节点的清单<i class="fas fa-external-link-alt"></i></a></li><li><a class="link" target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/deployorderer/ordererdeploy.html">部署订购服务<i class="fas fa-external-link-alt"></i></a></li></ul><h1 id="test-network"><a href="#test-network" class="headerlink" title="test-network"></a>test-network</h1><h2 id="network-up"><a href="#network-up" class="headerlink" title="network up"></a>network up</h2><ul><li>checkPreps</li><li>CreateOrgs<ul><li>organizations/cryptogen<ul><li><code>cryptogen generate --config=./organizations/cryptogen/crypto-config.yaml --output=&quot;organizations&quot;</code></li><li><code>./organizations/ccp-generate.sh</code></li></ul></li><li>organizations/fabric-ca<ul><li><code>docker-compose -f docker/docker-compose-ca.yaml_CA up -d 2&gt;&amp;1</code></li><li><code>. organizations/fabric-ca/registerEnroll.sh</code> –&gt; <code>createOrg</code><ul><li>enroll ca admin：<code>fabric-ca-client enroll</code></li><li>Registering peer0：<code>fabric-ca-client register</code></li><li>Registering user：<code>fabric-ca-client register</code></li><li>Registering the org admin：<code>fabric-ca-client register</code></li><li>Generating the peer0 msp：<code>fabric-ca-client enroll</code></li><li>Generating the peer0-tls certificates：<code>fabric-ca-client enroll</code></li><li>Generating the user msp：<code>fabric-ca-client enroll</code></li><li>Generating the org admin msp：<code>fabric-ca-client enroll</code></li></ul></li><li><code>./organizations/ccp-generate.sh</code></li></ul></li></ul></li><li><code>docker-compose $&#123;COMPOSE_FILES&#125; up -d 2&gt;&amp;1</code><ul><li>COMPOSE_FILES：docker目录下，<ul><li><code>docker-compose-ca</code>：上面的ca模式使用，开启ca的docker</li><li><code>docker-compose-couch</code>：-s couchdb 模式下使用，开启couchdb的docker</li><li><code>docker-compose-ca</code>：除了couchdb，其他模式均使用</li></ul></li></ul></li></ul><h2 id="network-createChannel"><a href="#network-createChannel" class="headerlink" title="network createChannel"></a>network createChannel</h2><p>scripts/createChannel.sh</p><h1 id="代码工具"><a href="#代码工具" class="headerlink" title="代码工具"></a>代码工具</h1><p>下面两个二进制执行文件是使用fabric源码生成的</p><ul><li><a class="link" target="_blank" rel="noopener" href="https://github.com/hyperledger/fabric.git">github<i class="fas fa-external-link-alt"></i></a></li><li><a class="link" target="_blank" rel="noopener" href="https://codechina.csdn.net/mirrors/hyperledger/fabric">code china<i class="fas fa-external-link-alt"></i></a> 国内镜像加速</li></ul><p>下载fabric源码之后，进入根目录，编译生成下面的二进制文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> fabric</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make cryptogen</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make configtxgen</span></span><br></pre></td></tr></table></figure><ul><li>make生成的可执行文件均在目录 <code>fabric/build/bin</code> 下</li></ul><h2 id="cryptogen"><a href="#cryptogen" class="headerlink" title="cryptogen"></a>cryptogen</h2><p>用于生成区块链网络中相应用户的相关证书文件，即组织结构身份文件</p><ul><li>编写配置文件 <code>crypto-config.yaml</code>，根据其生成相关的证书等，放在目录 <code>crypto-config</code> 下面</li></ul><p>从crypto-config.yaml配置文件中生成用户相应的秘钥和证书文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cryptogen generate --config=./crypto-config.yaml --output=<span class="string">&quot;organizations&quot;</span></span></span><br></pre></td></tr></table></figure><ul><li>文件将会生成在 <code>crypto-config.yaml</code> 文件所在路径的文件夹 <code>organizations</code>下<ul><li>一般会创建两种文件<code>peerOrganizations</code> 和 <code>ordererOrganizations</code></li></ul></li><li>不指定 <code>--output</code> 属性会默认在当前文件夹下建立一个 <code>crypto-config</code>文件夹，并将相关的证书放在该文件夹下</li></ul><h2 id="configtxgen"><a href="#configtxgen" class="headerlink" title="configtxgen"></a>configtxgen</h2><p>configtxgen模块用来生成<strong>orderer的初始化文件</strong>和<strong>channel的初始化文件</strong>， 配合cryptogen生成的组织结构身份文件使用，离线生成跟通道有关的配置信息</p><ul><li>configtxgen模块的配置文件 <code>configtx.yaml</code> 包括Fabric系统初始块、channel初始块文件等信息。</li><li>命令参数：<ul><li><strong>-asOrg</strong> string #所属组织，也就是为某个特定组织生成配置</li><li><strong>-channelID</strong>string #channel名称，如果不指定默认是”testchainid”</li><li><strong>-inspectBlock</strong> string #打印指定区块文件中配置内容</li><li><strong>-inspectChannelCreateTx</strong> string #打印指定创建通道交易的配置文件</li><li><strong>-outputAnchorPeersUpdate</strong> string #生成一个更新锚点的更新channel配置信息</li><li><strong>-outputBlock</strong> string #输出区块文件路径</li><li><strong>-outputCreateChannelTx</strong> string #指定一个路径，来生成channel配置文件</li><li><strong>-profile</strong> string #配置文件中的节点，用于生成相关配置文件，默认是 “SampleInsecureSolo”)</li><li><strong>-version</strong> #显示版本信息</li></ul></li></ul><p>用于生成通道配置的命令：</p><ol><li><p>生成Orderer服务启动的初始区块（即系统通道的创世区块文件）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> configtxgen -profile TwoOrgsOrdererGenesis -outputBlock ./config/genesis.block</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看通道配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> configtxgen -profile TwoOrgsOrdererGenesis -inspecBlock ./config/genesis.block</span></span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>生成新建应用通道的配置文件（即用于创建应用通道的配置交易文件）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./config/channel.tx -channelID mychannel</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看配置文件内容</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> configtxgen -profile TwoOrgsChannel -inspectChannelCreateTx ./config/channel.tx</span></span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>生成锚节点配置更新文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> configtxgen -profile TwoOrgsChannel -outputAnchorPeersUpdate ./config/Org1MSPanchors.tx -channelID mychannel -asOrg Org1MSP</span></span><br></pre></td></tr></table></figure></li></ol><blockquote><p>configtxgen的输出很大程度上受控于配置文件 <code>configtx.yaml</code> 的内容，该文件的搜索路径由 环境变量 <code>FABRIC_CFG_PATH</code> 指定。</p></blockquote><h2 id="Fabric-CA-命令行"><a href="#Fabric-CA-命令行" class="headerlink" title="Fabric CA 命令行"></a>Fabric CA 命令行</h2><p><a class="link" target="_blank" rel="noopener" href="https://www.jianshu.com/p/2159f9043102">https://www.jianshu.com/p/2159f9043102<i class="fas fa-external-link-alt"></i></a></p><p>Hyperledger Fabric CA由server和client两部分组成。<br>设置两个环境变量：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export FABRIC_CA_SERVER_HOME=$&#123;PWD&#125;/test-network/organizations/fabric-ca/server</span><br><span class="line">export FABRIC_CA_CLIENT_HOME=$&#123;PWD&#125;/test-network/organizations/fabric-ca/client</span><br></pre></td></tr></table></figure><ul><li>注意在 <strong>fabric-sample</strong> 样例中<ul><li>FABRIC_CA_SERVER_HOME = <code>/fabric-ca/orgn</code></li><li>FABRIC_CA_CLIENT_HOME = <code>fabric-ca</code></li></ul></li></ul><h3 id="fabric-ca-server"><a href="#fabric-ca-server" class="headerlink" title="fabric-ca-server"></a>fabric-ca-server</h3><p>主要有两个操作 - 初始化server服务、启动server服务</p><p><strong>1、初始化server服务</strong></p><p>在server启动之前，需要至少有一个自我认证的身份存在，这个步骤主要会创建这个自我认证的身份。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在 <span class="variable">$&#123;FABRIC_CA_SERVER_HOME&#125;</span> 目录下执行</span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;FABRIC_CA_SERVER_HOME&#125;fabric-ca-server init -b admin:adminpw</span></span><br></pre></td></tr></table></figure><p>命令执行完成后生成如下4个文件：</p><ul><li>server配置文件：<ul><li><code>$&#123;FABRIC_CA_SERVER_HOME&#125;/fabric-ca-server-config.yaml</code></li></ul></li><li>server内部存储数据库文件<ul><li><code>$&#123;FABRIC_CA_SERVER_HOME&#125;/fabric-ca-server.db</code></li><li>是一个sqlite文件，包含三个表</li></ul></li><li>自我认证身份的证书文件<ul><li><code>$&#123;FABRIC_CA_SERVER_HOME&#125;/ca-cert.pem</code></li></ul></li><li>自我认证身份的私钥(private key)文件<ul><li><code>$&#123;FABRIC_CA_SERVER_HOME&#125;/msp/keystore/*d_sk</code></li></ul></li></ul><p><strong>2、启动server服务</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">&#123;FABRIC_CA_SERVER_HOME&#125;/fabric-ca-server start -b admin:adminpw</span></span><br></pre></td></tr></table></figure><ul><li>启动过程使用默认的配置文件，即在初始化阶段生成的<code>$&#123;FABRIC_CA_SERVER_HOME&#125;/fabric-ca-server-config.yaml</code>，如果需要使用非默认配置文件，只需要通过命令行参数 <code>--config</code> 指定文件名即可。</li></ul><blockquote><p>另，我们看到server端的主要操作有两步完成，第一步初始化，第二步启动；实际上两步可以合并成一步，即直接执行第二步启动就可以，因为在启动过程中如果发现还没有进行过初始化，那么会自动执行初始化的操作；</p><p>那为什么需要分成两步呢？因为初始化完成之后用户可能需要对配置文件进行修改，调整参数和配置，然后在启动，而如果直接执行第二步就没有机会修改和调整配置了。</p></blockquote><p>启动完之后可以发送如下命令检查时候工作正常</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl -i -uadmin:adminpw -X POST -H <span class="string">&quot;Content-type:application/json&quot;</span> http://localhost:7054/cainfo</span></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Date: Tue, 10 Oct 2017 05:42:16 GMT</span><br><span class="line">Content-Length: 1127</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;success&quot;:true,</span><br><span class="line">  &quot;result&quot;:&#123;</span><br><span class="line">                 &quot;CAName&quot;:&quot;&quot;,</span><br><span class="line">                 &quot;CAChain&quot;:&quot;LS0tLS1CRUdJT......tLS0K&quot;</span><br><span class="line">             &#125;,</span><br><span class="line">  &quot;errors&quot;:[],</span><br><span class="line">  &quot;messages&quot;:[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="fabric-ca-client"><a href="#fabric-ca-client" class="headerlink" title="fabric-ca-client"></a>fabric-ca-client</h3><p>管理身份（包括属性管理）和证书（包括续订和回收）</p><p><strong>3、完成自证管理员身份认证</strong></p><p>自证管理员是在server启动的时候就内置进去的；后面的很多操作都需要管理员的身份，所以这一步先要获取管理员的身份资格，才能往下操作，比如添加新的角色身份，添加新的管理员等等。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;FABRIC_CA_CLIENT_HOME&#125;</span>/fabric-ca-client enroll -u http://admin:adminpw@localhost:7054</span><br></pre></td></tr></table></figure><p>4、</p><p>5、</p><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><h2 id="configtx-yaml"><a href="#configtx-yaml" class="headerlink" title="configtx.yaml"></a>configtx.yaml</h2><h2 id="crypto-config-yaml"><a href="#crypto-config-yaml" class="headerlink" title="crypto-config.yaml"></a>crypto-config.yaml</h2><p>fabric 网络用户拓扑关系配置文件</p><p>生成 <code>crypto-config.yaml</code> 的模版：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./bin/cryptogen showtemplate &gt; crypto-config.yaml</span></span><br></pre></td></tr></table></figure><ul><li>会在当前目录下生成 <code>crypto-config.yaml</code> 的模版示例</li></ul><h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><ul><li>Domain：相应组织的顶级域名</li><li>EnableNodeOUs：启用节点OU划分</li><li>Template.Count：表示组织下有几个节点，默认名字为peer0、peer1依次类推</li><li>Users.Count：表示组织下有几个User，默认有一个Admin，User命名从User1开始</li></ul><h2 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h2></div><div class="post-copyright-info"><div class="article-copyright-info-container"><ul><li>Post title：Network</li><li>Post author：Wei Jieyang</li><li>Create time：2021-03-22 18:15:31</li><li>Post link：https://jieyang-wei.github.io/2021/03/22/fabric-Deploying Network/</li><li>Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.</li></ul></div></div><div class="article-nav"><div class="article-prev"><a class="prev" rel="prev" href="/2021/03/25/fabric-SDK/"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item">fabric2</span> <span class="post-nav-item">Prev posts</span></span></a></div><div class="article-next"><a class="next" rel="next" href="/2021/03/20/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"><span class="title flex-center"><span class="post-nav-title-item">网络爬虫</span> <span class="post-nav-item">Next posts</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div></div></div></main></div><div class="page-main-content-bottom"><footer class="footer"><div class="info-container"><div class="copyright-info info-item">&copy; <span>2020</span> - 2021 <i class="fas fa-heart icon-animate"></i> <a href="/">Wei Jieyang</a></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item"><span id="busuanzi_container_site_uv">Visitor Count <span id="busuanzi_value_site_uv"></span>&ensp; </span><span id="busuanzi_container_site_pv">Totalview <span id="busuanzi_value_site_pv"></span></span></div><div class="theme-info info-item">Powered by <a target="_blank" href="https://hexo.io">Hexo</a> | Theme <a class="theme-version" target="_blank"></a></div></div></footer></div></div></main><div class="sidebar-tools"><div class="tools-container"><ul class="tools-list"><li class="search popup-trigger"><i class="fas fa-search"></i></li><li class="tools-item page-aside-toggle"><i class="fas fa-outdent"></i></li></ul></div></div><div class="right-bottom-side-tools"><div class="side-tools-container"><ul class="side-tools-list"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-expand-width flex-center"><i class="fas fa-arrows-alt-h"></i></li><li class="tools-item tool-dark-light-toggle flex-center"><i class="fas fa-moon"></i></li><li class="tools-item tool-scroll-to-top flex-center"><i class="fas fa-arrow-up"></i></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="tools-ul-1"><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li></ul></div></div><aside class="page-aside"><div class="post-toc-wrap"><div class="post-toc"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="nav-number">2.</span> <span class="nav-text">网络配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E9%83%A8%E5%88%86"><span class="nav-number">2.1.</span> <span class="nav-text">相关部分</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%81%E4%B9%A6%E9%A2%81%E5%8F%91%E6%9C%BA%E6%9E%84"><span class="nav-number">2.1.1.</span> <span class="nav-text">证书颁发机构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Organization"><span class="nav-number">2.1.2.</span> <span class="nav-text">Organization</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Database"><span class="nav-number">2.1.3.</span> <span class="nav-text">Database</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-Channel"><span class="nav-number">2.1.4.</span> <span class="nav-text">System Channel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Channel-and-Private-Data"><span class="nav-number">2.1.5.</span> <span class="nav-text">Channel and Private Data</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Container"><span class="nav-number">2.1.6.</span> <span class="nav-text">Container</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Chaincode"><span class="nav-number">2.1.7.</span> <span class="nav-text">Chaincode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#firewall"><span class="nav-number">2.1.8.</span> <span class="nav-text">firewall</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A4"><span class="nav-number">2.2.</span> <span class="nav-text">步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E8%B5%84%E6%BA%90%E9%9B%86%E7%BE%A4"><span class="nav-number">2.2.1.</span> <span class="nav-text">设置资源集群</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84"><span class="nav-number">2.2.2.</span> <span class="nav-text">管理基础架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AECA"><span class="nav-number">2.2.3.</span> <span class="nav-text">设置CA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CA%E5%92%8CMSP"><span class="nav-number">2.2.4.</span> <span class="nav-text">CA和MSP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2peer%E5%92%8Corderer"><span class="nav-number">2.2.5.</span> <span class="nav-text">部署peer和orderer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#peer"><span class="nav-number">2.2.5.1.</span> <span class="nav-text">peer</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA"><span class="nav-number">2.2.5.1.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2"><span class="nav-number">2.2.5.1.2.</span> <span class="nav-text">部署</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#order"><span class="nav-number">2.2.5.2.</span> <span class="nav-text">order</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-1"><span class="nav-number">2.2.5.2.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2-1"><span class="nav-number">2.2.5.2.2.</span> <span class="nav-text">部署</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#test-network"><span class="nav-number">3.</span> <span class="nav-text">test-network</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#network-up"><span class="nav-number">3.1.</span> <span class="nav-text">network up</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#network-createChannel"><span class="nav-number">3.2.</span> <span class="nav-text">network createChannel</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%B7%A5%E5%85%B7"><span class="nav-number">4.</span> <span class="nav-text">代码工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#cryptogen"><span class="nav-number">4.1.</span> <span class="nav-text">cryptogen</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#configtxgen"><span class="nav-number">4.2.</span> <span class="nav-text">configtxgen</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fabric-CA-%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="nav-number">4.3.</span> <span class="nav-text">Fabric CA 命令行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fabric-ca-server"><span class="nav-number">4.3.1.</span> <span class="nav-text">fabric-ca-server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fabric-ca-client"><span class="nav-number">4.3.2.</span> <span class="nav-text">fabric-ca-client</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">5.</span> <span class="nav-text">配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#configtx-yaml"><span class="nav-number">5.1.</span> <span class="nav-text">configtx.yaml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#crypto-config-yaml"><span class="nav-number">5.2.</span> <span class="nav-text">crypto-config.yaml</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%AE%B9"><span class="nav-number">5.2.1.</span> <span class="nav-text">内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-compose-yml"><span class="nav-number">5.3.</span> <span class="nav-text">docker-compose.yml</span></a></li></ol></li></ol></div></div></aside><div class="image-viewer-container"><div class="img-box"><img src=""></div></div></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fas fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Search..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fas fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/dark-light-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/local-search.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/code-copy.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/toc.js"></script></body></html>