<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Java框架 | 魏洁杨</title><link rel="shortcut icon" href="/images/logo.svg"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/css/font-awesome.min.css"><script id="hexo-configurations">let KEEP=window.KEEP||{};KEEP.hexo_config={hostname:"jieyang-wei.github.io",root:"/",path:"search.json"},KEEP.theme_config={toc:{enable:!0,number:!0,expand_all:!0},style:{primary_color:"#0066CC",avatar:"/images/avatar.jpg",favicon:"/images/logo.svg",img_position:"left",left_side_width:"260px",content_max_width:"900px",hover:{shadow:!0,scale:!0},first_screen:{enable:!0,background_img:"/images/bg.svg",description:"Welcome to Jieyang Wei's Blog"}},local_search:{enable:!0,trigger:"auto",unescape:!1,preload:!0},version:"3.0.4"},KEEP.language={search:"Search...",prev:"Prev",next:"Next",prev_posts:"Prev posts",next_posts:"Next posts",page:"Page %d",recent_posts:"Recent Posts",share:"Share",powered_by:"Powered by %s",theme:"Theme",rss_feed:"RSS Feed",category:"Category",categories:"Categories",tag:"Tag",tags:"Tags",tagcloud:"Tag Cloud",comment:"Comment",home:"Home",archive:"Archive",archives:"Archives",about:"About",site_uv:"Visitor Count",site_pv:"Totalview",links:"Links",link:"Link",top:"TOP",read_more:"Read more",wordcount:"Words",min2read:"Mins",changelog:"Changelog",copyright:{author:"Post author",title:"Post title",link:"Post link",create_time:"Create time",license_title:"Copyright Notice",license_content:"All articles in this blog are licensed under %s unless stating additionally."},ago:{second:"%s seconds ago",minute:"%s minutes ago",hour:"%s hours ago",day:"%s days age",week:"%s weeks age",month:"%s months age",year:"%s years age"}}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="WeiJY's blog" type="application/atom+xml"></head><body><div class="page-container"><header class="page-header"><div class="header-progress"></div></header><main class="page-main"><div class="page-main-content"><div class="page-main-content-top"><header class="header-wrapper"><div class="header-content"><a class="logo-title" href="/">魏洁杨</a><ul class="menu-list"><li class="menu-item"><a href="/">HOME</a></li><li class="menu-item"><a href="/categories">CATEGORIES</a></li><li class="menu-item"><a href="/categories/notebook">NOTEBOOK</a></li><li class="menu-item"><a href="/about">ABOUT</a></li><li class="menu-item"><a href="/tags">TAGS</a></li></ul><div class="menu-bar"><div class="menu-bar-middle"></div></div></div><div class="header-drawer"><ul class="drawer-menu-list"><li class="drawer-menu-item flex-center"><a href="/">HOME</a></li><li class="drawer-menu-item flex-center"><a href="/categories">CATEGORIES</a></li><li class="drawer-menu-item flex-center"><a href="/categories/notebook">NOTEBOOK</a></li><li class="drawer-menu-item flex-center"><a href="/about">ABOUT</a></li><li class="drawer-menu-item flex-center"><a href="/tags">TAGS</a></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle"><main class="main-content normal-code-theme"><div class="fade-in-down-animation"><div class="article-content-container"><div class="article-title"><span class="title-hover-animation">Java框架</span></div><div class="article-header"><div class="avatar"><img src="/images/avatar.jpg"></div><div class="info"><div class="author"><span>Wei Jieyang</span> <span class="level">Lv4</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fas fa-calendar"></i> 2021-06-22 11:47:39 </span><span class="article-categories article-meta-item"><i class="fas fa-folder"></i><ul><li><a href="/categories/Notebook/">Notebook</a></li><li>&gt; <a href="/categories/Notebook/Java/">Java</a></li></ul></span><span class="article-tags article-meta-item"><i class="fas fa-tags"></i><ul><li><a href="/tags/Java/">Java</a></li><li>| <a href="/tags/%E6%A1%86%E6%9E%B6/">框架</a></li></ul></span><span class="article-wordcount article-meta-item"><i class="fas fa-file-word"></i> <span>2k Words</span> </span><span class="article-min2read article-meta-item"><i class="fas fa-clock"></i> <span>8 Mins</span> </span><span class="article-pv article-meta-item"><i class="fas fa-eye"></i> <span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><h2 id="Swagger"><a href="#Swagger" class="headerlink" title="Swagger"></a>Swagger</h2><p><a class="link" target="_blank" rel="noopener" href="https://www.jianshu.com/p/349e130e40d5">参考<i class="fas fa-external-link-alt"></i></a></p><p>接口规范工具，通过注释的形式来规范接口的书写，并将其以可视化的形式展示出来，使得前后端分离变得更加的便捷</p><ul><li><strong>将项目中所有的接口展现在页面上</strong>，这样后端程序员就不需要专门为前端使用者编写专门的接口文档；</li><li>当接口更新之后，只需要修改代码中的 Swagger 描述就可以实时生成新的接口文档了，从而<strong>规避了接口文档老旧不能使用的问题</strong>；</li><li>通过 Swagger 页面，我们可以<strong>直接进行接口调用，降低了项目开发阶段的调试成本</strong>。</li><li>通俗的来讲，Swagger 就是将项目中所有（想要暴露的）接口展现在页面上，并且可以进行接口调用和测试的服务。</li></ul><blockquote><p>【Spring】迅速将Swagger规范纳入自身的标准，建立了Spring-swagger项目，后面改成了现在的Springfox。通过在项目中引入Springfox，可以扫描相关的代码，生成该描述文件，进而生成与代码一致的接口文档和客户端代码。这种通过代码生成接口文档的形式，在后面需求持续迭代的项目中，显得尤为重要和高效。</p></blockquote><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ol><li>添加依赖</li></ol><ol start="2"><li>开启Swagger功能</li></ol><ol start="3"><li>配置Swagger文档摘要信息</li></ol><ol start="4"><li>调用接口访问</li></ol><h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><h4 id="Api"><a href="#Api" class="headerlink" title="@Api()"></a>@Api()</h4><ul><li>用于类；表示标识这个类是swagger的资源</li><li><strong>tags</strong> – 表示说明，如果有多个值，会生成多个list</li><li><strong>value</strong> – 也是说明，可以使用tags替代</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Api(value=&quot;用户controller&quot;,tags=&#123;&quot;用户操作接口&quot;&#125;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure><h4 id="ApiOperation"><a href="#ApiOperation" class="headerlink" title="@ApiOperation()"></a>@ApiOperation()</h4><ul><li>用于方法；表示一个http请求的操作</li><li><strong>value</strong> - 用于方法描述</li><li><strong>notes</strong> - 用于提示内容</li><li><strong>tags</strong> - 可以重新分组（视情况而用）</li></ul><h4 id="ApiParam"><a href="#ApiParam" class="headerlink" title="@ApiParam()"></a>@ApiParam()</h4><ul><li>用于方法，参数，字段说明；表示对参数的添加元数据（说明或是否必填等）</li><li><strong>name</strong> – 参数名</li><li><strong>value</strong> – 参数说明</li><li><strong>required</strong> – 是否必填</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(&quot;更改用户信息&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/updateUserInfo&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUserInfo</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  <span class="meta">@RequestBody</span> </span></span></span><br><span class="line"><span class="function"><span class="params">  <span class="meta">@ApiParam(name=&quot;用户对象&quot;,value=&quot;传入json格式&quot;,required=true)</span> User user)</span></span>&#123; </span><br><span class="line">  <span class="keyword">int</span> num = userService.updateUserInfo(user); </span><br><span class="line">  <span class="keyword">return</span> num; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ApiModel"><a href="#ApiModel" class="headerlink" title="@ApiModel()"></a>@ApiModel()</h4><ul><li>用于类 ；表示对类进行说明，用于参数用实体类接收</li><li><strong>value</strong> - 表示对象名</li><li><strong>description</strong> – 描述</li><li>(都可省略)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModel(value=&quot;user对象&quot;,description=&quot;用户对象user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>; </span><br></pre></td></tr></table></figure><h4 id="ApiModelProperty"><a href="#ApiModelProperty" class="headerlink" title="@ApiModelProperty()"></a>@ApiModelProperty()</h4><ul><li>用于方法，字段； 表示对model属性的说明或者数据操作更改</li><li><strong>value</strong> – 字段说明</li><li><strong>name</strong> – 重写属性名字</li><li><strong>dataType</strong> – 重写属性类型</li><li><strong>required</strong> – 是否必填</li><li><strong>example</strong> – 举例说明</li><li><strong>hidden</strong> – 隐藏</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty(value=&quot;用户名&quot;,name=&quot;username&quot;,example=&quot;xingguo&quot;)</span> <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty(value=&quot;状态&quot;,name=&quot;state&quot;,required=true)</span></span><br><span class="line"><span class="keyword">private</span> Integer state; </span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="keyword">private</span> String nickName; </span><br><span class="line"><span class="keyword">private</span> Integer isDeleted; </span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty(value=&quot;id数组&quot;,hidden=true)</span> </span><br><span class="line"><span class="keyword">private</span> String[] ids; </span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; idList; <span class="comment">//省略get/set &#125;</span></span><br></pre></td></tr></table></figure><h4 id="ApiIgnore"><a href="#ApiIgnore" class="headerlink" title="@ApiIgnore()"></a>@ApiIgnore()</h4><ul><li>用于类或者方法上，可以不被swagger显示在页面上，比较简单, 这里不做举例</li></ul><h4 id="ApiImplicitParam"><a href="#ApiImplicitParam" class="headerlink" title="@ApiImplicitParam()"></a>@ApiImplicitParam()</h4><ul><li><p>用于方法，表示单独的请求参数</p></li><li><p><strong>name</strong> – 参数名</p></li><li><p><strong>value</strong> – 参数说明</p></li><li><p><strong>dataType</strong> – 数据类型</p></li><li><p><strong>paramType</strong> – 参数类型</p></li><li><p><strong>example</strong> – 举例说明</p></li></ul><h4 id="ApiImplicitParams"><a href="#ApiImplicitParams" class="headerlink" title="@ApiImplicitParams()"></a>@ApiImplicitParams()</h4><ul><li><p>用于方法，包含多个 @ApiImplicitParam</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value=&quot;获取邮箱验证码&quot;,notes=&quot;三种场景：根据type参数决定\n&quot;)</span></span><br><span class="line"><span class="meta">@ApiImplicitParams(&#123;</span></span><br><span class="line"><span class="meta">    @ApiImplicitParam(name = &quot;type&quot;, value = &quot;类型：register | update | forget&quot;, required = true, dataType = &quot;String&quot;, paramType = &quot;query&quot;),</span></span><br><span class="line"><span class="meta">    @ApiImplicitParam(name = &quot;emailAddress&quot;, value = &quot;邮箱地址&quot;, required = true, dataType = &quot;String&quot;, paramType = &quot;query&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/getEmailCode&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> AjaxResult <span class="title">sendEmailCode</span><span class="params">(<span class="meta">@RequestParam(&quot;type&quot;)</span> String type,</span></span></span><br><span class="line"><span class="function"><span class="params">                                <span class="meta">@RequestParam</span> String emailAddress)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> loginService.sendEmailCode(type, emailAddress);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="JRebel"><a href="#JRebel" class="headerlink" title="JRebel"></a>JRebel</h2><p><a class="link" target="_blank" rel="noopener" href="https://www.jrebel.com/jrebel-and-xrebel-intellij-idea-plugins">JRebel官网地址<i class="fas fa-external-link-alt"></i></a></p><ul><li>JRebel是一款JVM插件，实时监控java代码的状态，它使得Java代码修改后不用重启系统，立即生效。<ul><li>主要针对 Java + Tomcat 的 web 项目</li></ul></li><li>IDEA上原生是不支持热部署的，一般更新了 Java 文件后要手动重启 Tomcat 服务器，才能生效，浪费时间浪费生命。</li><li>目前对于idea热部署最好的解决方案就是安装JRebel插件。</li></ul><p><strong>破解</strong></p><p>在激活页面的 <code>connect online licensing service</code> 选项下面填入激活码地址（邮箱号随意）</p><p>代理地址格式：<a class="link" target="_blank" rel="noopener" href="https://jrebel.qekang.com/%7BGUID%7D">https://jrebel.qekang.com/{GUID}<i class="fas fa-external-link-alt"></i></a></p><p>GUID生成：<a class="link" target="_blank" rel="noopener" href="https://www.guidgen.com/">在线生成GUID地址<i class="fas fa-external-link-alt"></i></a></p><h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><p>开启 compile 的属性：<code>Build project automatically</code></p><p>勾选全部选项</p><img src="/2021/06/22/Java%E6%A1%86%E6%9E%B6/截屏2021-06-28 上午9.35.12.png" alt="截屏2021-06-28 上午9.35.12" style="zoom:50%"><p>使用右上角的图标运行</p><img src="/2021/06/22/Java%E6%A1%86%E6%9E%B6/截屏2021-06-28 上午9.38.13.png" alt="截屏2021-06-28 上午9.38.13" style="zoom:50%"><p>1、Tomcat</p><p>2、Spring Boot</p><h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="注解-1"><a href="#注解-1" class="headerlink" title="注解"></a>注解</h2><h3 id="ResponseBody"><a href="#ResponseBody" class="headerlink" title="@ResponseBody"></a>@ResponseBody</h3><h3 id="Controller"><a href="#Controller" class="headerlink" title="@Controller"></a>@Controller</h3><h3 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h3><p>相当于 @Controller + @ResponseBody 两个注解的结合，返回json数据不需要在方法前面加@ResponseBody注解了，但使用@RestController这个注解，就不能返回jsp,html页面，视图解析器无法解析jsp,html页面</p><blockquote><ol><li>如果只是使用@RestController注解Controller，则Controller中的方法无法返回jsp页面，配置的视图解析器InternalResourceViewResolver不起作用，返回的内容就是Return 里的内容<ul><li>例如：本来应该到success.jsp页面的，则其显示success.</li></ul></li></ol><ol start="2"><li>如果需要返回到指定页面，则需要用 @Controller配合视图解析器InternalResourceViewResolver才行。</li><li>如果需要返回JSON，XML或自定义mediaType内容到页面，则需要在对应的方法上加上@ResponseBody注解。</li></ol></blockquote><h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><p>Spring 框架的核心特性是可以用于开发任何 Java 应用程序，但是在 Java EE 平台上构建 web 应用程序是需要扩展的。 Spring 框架的目标是使 J2EE 开发变得更容易使用。</p><p><strong>体系结构</strong>：</p><h2 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h2><h2 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h2><p>启动类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(TestApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="注解-2"><a href="#注解-2" class="headerlink" title="注解"></a>注解</h3><h4 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h4><ul><li>启动类注解</li><li>它组合了多个注解，如@componentScan、@SpringBootConfiguration、@EnableAutoConfiguration。这些注解自动开启了自动扫描、依赖注入、自动配置等功能，而且main里的方法又加载了监听器、过滤器、拦截器等功能</li><li>（具体查看SpringApplication.run方法的源码）</li></ul><h4 id="SpringBootTest"><a href="#SpringBootTest" class="headerlink" title="@SpringBootTest"></a>@SpringBootTest</h4><p>该注解是用到类名上，表示自动启动加载类或指定某个或多个加载启动类，默认会加载当前module下的启动类</p><h2 id="Spring-Security"><a href="#Spring-Security" class="headerlink" title="Spring Security"></a>Spring Security</h2><p><a class="link" target="_blank" rel="noopener" href="https://www.cnblogs.com/lenve/p/11242055.html">参考<i class="fas fa-external-link-alt"></i></a></p><p>Spring Security 是 Spring 家族中的一个安全管理框架，实际上，在 Spring Boot 出现之前，Spring Security 就已经发展了多年了，但是使用的并不多，安全管理这个领域，一直是 Shiro 的天下。</p><p>相对于 Shiro，在 SSM/SSH 中整合 Spring Security 都是比较麻烦的操作，所以，Spring Security 虽然功能比 Shiro 强大，但是使用反而没有 Shiro 多（Shiro 虽然功能没有 Spring Security 多，但是对于大部分项目而言，Shiro 也够用了）。</p><p>自从有了 Spring Boot 之后，Spring Boot 对于 Spring Security 提供了 自动化配置方案，可以零配置使用 Spring Security。</p><p>因此，一般来说，常见的安全管理技术栈的组合是这样的：</p><ul><li>SSM + Shiro</li><li>Spring Boot/Spring Cloud + Spring Security</li></ul><h3 id="注解-3"><a href="#注解-3" class="headerlink" title="注解"></a>注解</h3><h4 id="PreAuthorize"><a href="#PreAuthorize" class="headerlink" title="@PreAuthorize()"></a>@PreAuthorize()</h4><ul><li>可以用来控制一个方法是否能够被调用</li><li><code>@PreAuthorize(&quot;@ss.hasPermi(&#39;monitor:logininfor:export&#39;)&quot;)</code><ul><li>@ss标签对应的 <code>PermissionService</code></li><li>调用service的 <code>hasPermi</code> 方法</li><li>传入参数为 <code>monitor:logininfor:export</code>，表示用户的查询权限</li></ul></li></ul><p><strong>Controller层</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;monitor:logininfor:list&#x27;)&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TableDataInfo <span class="title">list</span><span class="params">(SysLogininfor logininfor)</span> </span>&#123;</span><br><span class="line">    startPage();</span><br><span class="line">    List&lt;SysLogininfor&gt; list = logininforService.selectLogininforList(logininfor);</span><br><span class="line">    <span class="keyword">return</span> getDataTable(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Service层</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;ss&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissionService</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 验证用户是否具备某权限</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> permission 权限字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户是否具备某权限</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPermi</span><span class="params">(String permission)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(permission)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        LoginUser loginUser = tokenService.getLoginUser(ServletUtils.getRequest());</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNull(loginUser) || CollectionUtils.isEmpty(loginUser.getPermissions())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hasPermissions(loginUser.getPermissions(), permission);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断是否包含权限</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> permissions 权限列表</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> permission  权限字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户是否具备某权限</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">hasPermissions</span><span class="params">(Set&lt;String&gt; permissions, String permission)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> permissions.contains(ALL_PERMISSION) || permissions.contains(StringUtils.trim(permission));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="PermitAll"><a href="#PermitAll" class="headerlink" title="@PermitAll"></a>@PermitAll</h4><h4 id="PermitAllScope"><a href="#PermitAllScope" class="headerlink" title="@PermitAllScope"></a>@PermitAllScope</h4><h1 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h1><h1 id="SSM"><a href="#SSM" class="headerlink" title="SSM"></a>SSM</h1><p>Spring + SpringMVC + MyBatis</p><p>项目目录结构：</p><img src="/2021/06/22/Java%E6%A1%86%E6%9E%B6/1265200-20181218224119343-81299111.png" alt="1265200-20181218224119343-81299111" style="zoom:75%"></div><div class="post-copyright-info"><div class="article-copyright-info-container"><ul><li>Post title：Java框架</li><li>Post author：Wei Jieyang</li><li>Create time：2021-06-22 11:47:39</li><li>Post link：https://jieyang-wei.github.io/2021/06/22/Java框架/</li><li>Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.</li></ul></div></div><div class="article-nav"><div class="article-prev"><a class="prev" rel="prev" href="/2021/06/22/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item">服务器</span> <span class="post-nav-item">Prev posts</span></span></a></div><div class="article-next"><a class="next" rel="next" href="/2021/03/31/shell/"><span class="title flex-center"><span class="post-nav-title-item">shell</span> <span class="post-nav-item">Next posts</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div></div></div></main></div><div class="page-main-content-bottom"><footer class="footer"><div class="info-container"><div class="copyright-info info-item">&copy; <span>2020</span> - 2021 <i class="fas fa-heart icon-animate"></i> <a href="/">Wei Jieyang</a></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item"><span id="busuanzi_container_site_uv">Visitor Count <span id="busuanzi_value_site_uv"></span>&ensp; </span><span id="busuanzi_container_site_pv">Totalview <span id="busuanzi_value_site_pv"></span></span></div><div class="theme-info info-item">Powered by <a target="_blank" href="https://hexo.io">Hexo</a> | Theme <a class="theme-version" target="_blank"></a></div></div></footer></div></div></main><div class="sidebar-tools"><div class="tools-container"><ul class="tools-list"><li class="search popup-trigger"><i class="fas fa-search"></i></li><li class="tools-item page-aside-toggle"><i class="fas fa-outdent"></i></li></ul></div></div><div class="right-bottom-side-tools"><div class="side-tools-container"><ul class="side-tools-list"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-expand-width flex-center"><i class="fas fa-arrows-alt-h"></i></li><li class="tools-item tool-dark-light-toggle flex-center"><i class="fas fa-moon"></i></li><li class="tools-item tool-scroll-to-top flex-center"><i class="fas fa-arrow-up"></i></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="tools-ul-1"><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li></ul></div></div><aside class="page-aside"><div class="post-toc-wrap"><div class="post-toc"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B7%A5%E5%85%B7"><span class="nav-number">2.</span> <span class="nav-text">工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Swagger"><span class="nav-number">2.1.</span> <span class="nav-text">Swagger</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-number">2.1.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3"><span class="nav-number">2.1.2.</span> <span class="nav-text">注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Api"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">@Api()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ApiOperation"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">@ApiOperation()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ApiParam"><span class="nav-number">2.1.2.3.</span> <span class="nav-text">@ApiParam()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ApiModel"><span class="nav-number">2.1.2.4.</span> <span class="nav-text">@ApiModel()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ApiModelProperty"><span class="nav-number">2.1.2.5.</span> <span class="nav-text">@ApiModelProperty()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ApiIgnore"><span class="nav-number">2.1.2.6.</span> <span class="nav-text">@ApiIgnore()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ApiImplicitParam"><span class="nav-number">2.1.2.7.</span> <span class="nav-text">@ApiImplicitParam()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ApiImplicitParams"><span class="nav-number">2.1.2.8.</span> <span class="nav-text">@ApiImplicitParams()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JRebel"><span class="nav-number">2.2.</span> <span class="nav-text">JRebel</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="nav-number">2.2.1.</span> <span class="nav-text">使用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Web"><span class="nav-number">3.</span> <span class="nav-text">Web</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3-1"><span class="nav-number">3.1.</span> <span class="nav-text">注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ResponseBody"><span class="nav-number">3.1.1.</span> <span class="nav-text">@ResponseBody</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Controller"><span class="nav-number">3.1.2.</span> <span class="nav-text">@Controller</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RestController"><span class="nav-number">3.1.3.</span> <span class="nav-text">@RestController</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring"><span class="nav-number">4.</span> <span class="nav-text">Spring</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-MVC"><span class="nav-number">4.1.</span> <span class="nav-text">Spring MVC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot"><span class="nav-number">4.2.</span> <span class="nav-text">Spring Boot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3-2"><span class="nav-number">4.2.1.</span> <span class="nav-text">注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SpringBootApplication"><span class="nav-number">4.2.1.1.</span> <span class="nav-text">@SpringBootApplication</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SpringBootTest"><span class="nav-number">4.2.1.2.</span> <span class="nav-text">@SpringBootTest</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Security"><span class="nav-number">4.3.</span> <span class="nav-text">Spring Security</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3-3"><span class="nav-number">4.3.1.</span> <span class="nav-text">注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PreAuthorize"><span class="nav-number">4.3.1.1.</span> <span class="nav-text">@PreAuthorize()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PermitAll"><span class="nav-number">4.3.1.2.</span> <span class="nav-text">@PermitAll</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PermitAllScope"><span class="nav-number">4.3.1.3.</span> <span class="nav-text">@PermitAllScope</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SSH"><span class="nav-number">5.</span> <span class="nav-text">SSH</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SSM"><span class="nav-number">6.</span> <span class="nav-text">SSM</span></a></li></ol></div></div></aside><div class="image-viewer-container"><div class="img-box"><img src=""></div></div></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fas fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Search..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fas fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/dark-light-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/local-search.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/code-copy.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/toc.js"></script></body></html>